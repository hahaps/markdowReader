{"version":3,"sources":["scripts/app.js"],"names":["angular","module","acmeNavbar","NavbarController","$scope","menueService","toastr","$log","$uibModal","vm","this","default_menu","label","link","getMenuSuccess","menue","push","treedata","$emit","header","name","text","getMenuError","error","options","allowDeselect","getMenues","success","selectedNode","showSelected","item","debug","folder","create","open","bindToController","controller","controllerAs","templateUrl","size","resolve","menu","edit","destroy","children","length","warning","$inject","directive","restrict","replace","validatorService","validFileName","lenght","REG","test","validFolderName","checkExist","len","index","service","factory","$http","method","url","createFolder","dir","data","delFolder","updateFolderName","old","createFile","file","content","delFile","updateFile","updateFileName","delete","updateName","update","ModifyController","$state","nameLen","substr","updateSuccess","$close","go","reload","updateFaild","err","vaild","invalid","ENTER_KEYCODE","hander","$event","keycode","keyCode","DeleteController","fileName","deleteSuccess","deleteError","CreateController","createSuccess","createFaild","valid","nam","warn","select","type","autoFixHeight","AutoFix","$ele","$attrs","ngModel","$target","element","target","$watch","$modelValue","height","css","require","MainController","showNav","editable","$on","event","loadData","conentSuccess","contentError","save","updateError","handle","runBlock","run","routerConfig","$stateProvider","$urlRouterProvider","state","otherwise","config","constant","malarkey","moment","$logProvider","toastrConfig","markedProvider","debugEnabled","allowHtml","timeOut","positionClass","setOptions","gfm","tables","highlight","code","lang","hljs","value","highlightAuto","$templateCache","put"],"mappings":"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","file":"scripts/app-2f9abc9abf.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize',\n                         'ngMessages', 'ngAria', 'ngResource', 'ui.router',\n                         'ui.bootstrap', 'toastr', 'treeControl', 'hc.marked']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/templates/navbar.html',\n      controller: NavbarController,\n      bindToController: true,\n      replace: true,\n      controllerAs: 'nv'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController($scope, menueService,\n       toastr, $log, $uibModal) {\n      var vm = this;\n      var default_menu = {\n        label: \"README\",\n        link: \"/README.md\"\n      }\n      var getMenuSuccess = function (menue) {\n        menue = menue || [];\n        menue.push(default_menu);\n        vm.treedata = menue;\n        $scope.$emit(\"SET:MENU\", {\n          header: default_menu.name,\n          text: default_menu.link\n        });\n      };\n      var getMenuError = function () {\n        toastr.error(\"Faild to get Menue\");\n        vm.treedata = [default_menu];\n        vm.options = {\n          allowDeselect: false\n        };\n        $scope.$emit(\"SET:MENU\", {\n          header: default_menu.name,\n          text: default_menu.link\n        });\n      };\n      menueService.getMenues().success(getMenuSuccess).error(getMenuError);\n\n      vm.selectedNode = null;\n      vm.showSelected = function (item) {\n        if(vm.selectedNode && vm.selectedNode.link === item.link) {\n          $log.debug(\"Node %s was selected.\", item.label);\n          return false;\n        }\n        vm.selectedNode = item;\n        if(!item.folder) {\n          $scope.$emit(\"SET:MENU\", {\n            header: item.name,\n            text: item.link\n          });\n        }\n      }\n\n      vm.create = function (item) {\n        $uibModal.open({\n          bindToController: true,\n          controller: 'CreateController',\n          controllerAs: 'cr',\n          templateUrl: 'app/components/navbar/templates/create.html',\n          size: 'lg',\n          resolve: {\n            menu: item\n          }\n        });\n      }\n\n      vm.edit = function (item) {\n        $uibModal.open({\n          bindToController: true,\n          controller: 'ModifyController',\n          controllerAs: 'ed',\n          templateUrl: 'app/components/navbar/templates/modify.html',\n          size: 'lg',\n          resolve: {\n            menu: item\n          }\n        });\n      }\n\n      vm.destroy = function (item) {\n        if(item.children && item.children.length) {\n          toastr.warning(\"Delete files behind \" + item.link + \" firt.\");\n        } else {\n          $uibModal.open({\n            bindToController: true,\n            controller: 'DeleteController',\n            controllerAs: 'del',\n            templateUrl: 'app/components/navbar/templates/delete.html',\n            size: 'lg',\n            resolve: {\n              menu: item\n            }\n          });\n        }\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .factory('validatorService', validatorService);\n\n  /** @ngInject */\n  function validatorService() {\n    var service = {\n      validFileName: validFileName,\n      validFolderName: validFolderName,\n      checkExist: checkExist\n    };\n\n    var REG = /[<>,/\\|:\"*?']/g;\n    function validFileName (name) {\n      if(!name || name.length > 40 || name.lenght < 1) {\n        return false;\n      }\n      if(REG.test(name)) {\n        return false;\n      }\n      return true;\n    }\n\n    function validFolderName(name) {\n      validFileName(name);\n    }\n\n    function checkExist(children, name) {\n      children = children || [];\n      var len = children.length;\n      for(var index = 0; index < len; index ++) {\n        if(children[index].label === name) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    return service;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .factory('menueService', menueService);\n\n  /** @ngInject */\n  function menueService($http) {\n    var service = {\n      getMenues: getMenues,\n      folder: {\n        create: createFolder,\n        delete: delFolder,\n        updateName: updateFolderName\n      },\n      file: {\n        create: createFile,\n        delete: delFile,\n        update: updateFile,\n        updateName: updateFileName\n      }\n    };\n\n    function getMenues () {\n      return $http({\n        method: \"GET\",\n        url: \"/menu\"\n      });\n    }\n\n    function createFolder (dir) {\n      return $http({\n        method: \"POST\",\n        url: \"/folder\",\n        data: {\n          dir: dir\n        }\n      });\n    }\n\n    function delFolder (dir) {\n      return $http({\n        method: \"POST\",\n        url: \"/folder/del\",\n        data: {\n          dir: dir\n        }\n      });\n    }\n\n    function updateFolderName (old, dir) {\n      return $http({\n        method: \"POST\",\n        url: \"/folder/update/name\",\n        data: {\n          dir: dir,\n          old: old\n        }\n      });\n    }\n\n    function createFile (file, content) {\n      return $http({\n        method: \"POST\",\n        url: \"/file\",\n        data: {\n          file: file,\n          content: content\n        }\n      });\n    }\n\n    function delFile (file) {\n      return $http({\n        method: \"POST\",\n        url: \"/file/del\",\n        data: {\n          file: file\n        }\n      });\n    }\n\n    function updateFile (file, content) {\n      return $http({\n        method: \"POST\",\n        url: \"/file/update\",\n        data: {\n          file: file,\n          content: content\n        }\n      });\n    }\n\n    function updateFileName(old, file) {\n      return $http({\n        method: \"POST\",\n        url: \"/file/update/name\",\n        data: {\n          file: file,\n          old: old\n        }\n      });\n    }\n\n    return service;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .controller('ModifyController', ModifyController);\n\n  /** @ngInject */\n  function ModifyController($scope, $state, toastr, $log,\n     validatorService, menueService, menu) {\n    var vm = this;\n    var link = menu.link || \"/doc\";\n    vm.name = menu.label || \"\";\n    var nameLen = vm.name.length;\n    nameLen += menu.folder ? 0 : 3;\n    vm.link = link.substr(0, link.length - nameLen);\n    vm.folder = menu.folder;\n    vm.file = menu.folder ? false : true;\n\n    var updateSuccess = function () {\n      if(vm.folder) {\n        toastr.success(\"Update folder name successful\");\n      } else {\n        toastr.success(\"Update file name successful\");\n      }\n      $scope.$close();\n      $state.go(\"home\", null, {reload: true});\n    };\n    var updateFaild = function (err) {\n      if(vm.folder) {\n        toastr.error(\"Faild to update folder name as \" + err);\n      } else {\n        toastr.error(\"Faild to update file name as \" + err);\n      }\n    };\n\n    vm.vaild = function() {\n      if(!validatorService.validFileName(vm.name)) {\n        vm.invalid = true;\n        return false;\n      }\n      vm.invalid = false;\n    }\n    var ENTER_KEYCODE = 13;\n    vm.hander = function($event) {\n      var keycode = $event.keyCode;\n      if(keycode === ENTER_KEYCODE) {\n        if(vm.folder) {\n          $log.debug(\"Updating folder name ...\");\n\n          menueService.folder.updateName(\n            menu.link, vm.link + '/' + vm.name)\n                      .success(updateSuccess).error(updateFaild);\n        } else {\n          $log.debug(\"Updating file name ...\");\n          menueService.file.updateName(\n            menu.link, vm.link + '/' + vm.name + \".md\")\n                      .success(updateSuccess).error(updateFaild);\n        }\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .controller('DeleteController', DeleteController);\n\n  /** @ngInject */\n  function DeleteController($scope, $state, toastr, menueService, menu) {\n    var vm = this;\n    vm.fileName = menu.link;\n    var deleteSuccess = function() {\n      toastr.success(\"Delete file/folder success.\");\n      $scope.$close();\n      $state.go(\"home\", null, {reload: true});\n    }\n\n    var deleteError = function() {\n      $scope.$close();\n      toastr.error(\"Faild to delete file/folder.\");\n    }\n    vm.delete = function () {\n      if(menu.folder) {\n        menueService.folder.delete(menu.link)\n                    .success(deleteSuccess).error(deleteError);\n      } else {\n        menueService.file.delete(menu.link)\n                    .success(deleteSuccess).error(deleteError);\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .controller('CreateController', CreateController);\n\n  /** @ngInject */\n  function CreateController($scope, $state, $log, toastr,\n     validatorService, menueService, menu) {\n    var vm = this;\n    vm.link = menu.link + \"/\";\n    vm.name = \"\";\n    vm.folder = menu.folder;\n    vm.file = menu.folder ? false : true;\n    $log.debug(vm);\n\n    var createSuccess = function () {\n      if(vm.folder) {\n        toastr.success(\"Create folder successful\");\n      } else {\n        toastr.success(\"Create file successful\");\n      }\n      $state.go(\"home\", null, {reload: true});\n      $scope.$close();\n    };\n    var createFaild = function (err) {\n      if(vm.folder) {\n        toastr.error(\"Faild to create folder as \" + err);\n      } else {\n        toastr.error(\"Faild to create file as \" + err);\n      }\n    };\n\n    vm.valid = function() {\n      if(!validatorService.validFileName(vm.name)) {\n        vm.invalid = true;\n        return false;\n      }\n      vm.invalid = false;\n    }\n    var ENTER_KEYCODE = 13;\n    vm.hander = function($event) {\n      var keycode = $event.keyCode;\n      if(keycode === ENTER_KEYCODE) {\n        if(validatorService.checkExist(menu.children, vm.nam)) {\n          toastr.warn(\"File \" + vm.name + \" exist.\");\n          return false;\n        }\n        if(vm.folder) {\n          $log.debug(\"Creating a folder ...\");\n          menueService.folder.create(vm.link + '/' + vm.name)\n                      .success(createSuccess).error(createFaild);\n        } else {\n          $log.debug(\"Creating a file ...\");\n          menueService.file.create(vm.link + '/' + vm.name + \".md\")\n                      .success(createSuccess).error(createFaild);\n        }\n      }\n    }\n\n    vm.select = function (type) {\n      if(type === 'folder') {\n        vm.folder = true;\n        vm.file = false;\n      } else {\n        vm.folder = false;\n        vm.file = true;\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .directive('autoFixHeight', autoFixHeight);\n\n  /** @ngInject */\n  function autoFixHeight() {\n    var directive = {\n      restrict: 'A',\n      require: 'ngModel',\n      link: AutoFix\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function AutoFix($scope, $ele, $attrs, ngModel) {\n      var $target = angular.element(\"#\" + $attrs.target);\n      $scope.$watch(function () {\n        return ngModel.$modelValue;\n      }, function() {\n        if($target.length && $target.height()) {\n          $ele.css(\"height\", $target.css(\"height\"));\n        }\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController($scope, $http,\n     toastr, menueService, $state) {\n    var vm = this;\n    vm.showNav = true;\n    vm.editable = false;\n    $scope.$on(\"SET:MENU\", function (event, content) {\n      vm.content = content;\n      loadData();\n    });\n\n    vm.content = {\n      header: \"README\",\n      text: \"/README.md\"\n    };\n    var conentSuccess = function (data) {\n      vm.content.content = data;\n    }\n\n    var contentError = function () {\n      toastr.error(\"Faild to read data from \" + vm.content.text);\n    }\n    var loadData = function () {\n      $http({\n        method: \"GET\",\n        url: vm.content.text\n      }).success(conentSuccess).error(contentError);\n    }\n    loadData();\n\n    vm.save = function () {\n      toastr.success(\"Update file/folder success.\");\n      $state.go(\"home\", null, {reload: true});\n    }\n\n    var updateSuccess = function() {\n      toastr.success(\"Update file success.\");\n      $state.go(\"home\", null, {reload: true});\n    };\n    var updateError = function() {\n      toastr.error(\"Failed to update file, please try again.\");\n    };\n\n    vm.handle = function (type) {\n      if(!type && vm.editable) {\n        type = 'save';\n      } else if(!type && !vm.editable) {\n        type = 'edit';\n      }\n      if(type === 'cancel') {\n        vm.editable = false;\n        vm.showNav = true;\n      } else if(type === 'edit') {\n        vm.editable = true;\n        vm.showNav = false;\n      } else if(type === 'save'){\n        menueService.file.update(vm.content.text, vm.content.content)\n                    .success(updateSuccess).error(updateError);\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/templates/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('markdownReader')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, markedProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 5000;\n    toastrConfig.positionClass = 'toast-top-right';\n    // toastrConfig.preventDuplicates = true;\n    // toastrConfig.progressBar = true;\n\n    // Setup angular-marked\n    markedProvider.setOptions({\n      gfm: true,\n      tables: true,\n      highlight: function (code, lang) {\n        if (lang) {\n          return hljs.highlight(lang, code, true).value;\n        } else {\n          return hljs.highlightAuto(code).value;\n        }\n      }\n    });\n  }\n\n})();\n\nangular.module(\"markdownReader\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/templates/main.html\",\"<acme-navbar ng-show=main.showNav></acme-navbar><div class=main-view ng-class=\\\"{false: \\'larger-main\\', true: \\'\\'}[main.showNav]\\\"><div class=main-container><div class=main-header></div><div class=main-center ng-class=\\\"{true: \\'larger-center\\', false: \\'\\'}[main.editable]\\\"><div class=content-header><div class=content-header-tools><i ng-class=\\\"{true: \\'left\\', false: \\'right\\'}[main.showNav]\\\" ng-click=\\\"main.showNav=!main.showNav\\\"></i> <i ng-class=\\\"{true: \\'save\\', false: \\'edit\\'}[main.editable]\\\" ng-click=main.handle()></i> <i class=cancel ng-click=\\\"main.handle(\\'cancel\\')\\\" ng-show=main.editable></i></div></div><div class=content-main><textarea type=text ng-if=main.editable class=\\\"edit-content split-content\\\" ng-model=main.content.content></textarea><div marked=main.content.content class=content-marked ng-class=\\\"{true: \\'split-content\\', false: \\'\\'}[main.editable]\\\"></div></div></div><div class=main-footer></div></div></div>\");\n$templateCache.put(\"app/components/navbar/templates/create.html\",\"<div class=\\\"modal-form create\\\"><div class=modal-desc><i class=add></i><span>Click enter to add a file or a folder.</span></div><div class=field ng-class=\\\"{true: \\'field-invalid\\', false: \\'\\'}[cr.invalid]\\\"><div class=field-type><input type=checkbox ng-model=cr.folder ng-click=\\\"cr.select(\\'folder\\')\\\"> <span class=text>folder&nbsp;or&nbsp;</span> <input type=checkbox ng-model=cr.file ng-click=\\\"cr.select(\\'file\\')\\\"> <span class=text>file&nbsp;with&nbsp;path&nbsp;</span></div><span class=field-link ng-bind=cr.link></span> <input class=field-name ng-model=cr.name type=text ng-change=cr.valid() ng-keydown=cr.hander($event) autofocus> <span ng-show=cr.file>.md</span></div></div>\");\n$templateCache.put(\"app/components/navbar/templates/delete.html\",\"<div class=\\\"modal-form create\\\"><div class=modal-desc><i class=delete></i><span>Are you sure to delete file/folder <strong>{{del.fileName}}<strong>?</strong></strong></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class=\\\"btn-danger btn btn-del\\\" ng-click=del.delete()>Yes, Destroy It</button></div></div>\");\n$templateCache.put(\"app/components/navbar/templates/modify.html\",\"<div class=\\\"modal-form modify\\\"><div class=modal-desc><i class=edit></i><span>Click enter to update {{ed.folder?\\'folder\\':\\'file\\'}} name.</span></div><div class=field ng-class=\\\"{true: \\'field-invalid\\', false: \\'\\'}[ed.invalid]\\\"><span class=field-link ng-bind=ed.link></span> <input class=field-name ng-model=ed.name type=text ng-change=cr.valid() ng-keydown=ed.hander($event) autofocus> <span ng-show=ed.file>.md</span></div></div>\");\n$templateCache.put(\"app/components/navbar/templates/navbar.html\",\"<nav class=navbar-left><div class=nav-title><a class=desc href=https://github.com/hahaps>Hahaps Doc</a></div><treecontrol class=tree-dark tree-model=nv.treedata on-selection=nv.showSelected(node)><span>{{node.label}}</span><div class=tree-tools><i ng-if=node.folder class=tree-tool-add ng-click=nv.create(node)></i> <i class=tree-tool-del ng-click=nv.destroy(node)></i> <i class=tree-tool-edit ng-click=nv.edit(node)></i></div></treecontrol></nav>\");}]);"],"sourceRoot":"/source/"}