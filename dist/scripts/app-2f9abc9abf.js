!function(){"use strict";angular.module("markdownReader",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","treeControl","hc.marked"])}(),function(){"use strict";function e(){function e(e,n,t,a,l){var r=this,o={label:"README",link:"/README.md"},i=function(n){n=n||[],n.push(o),r.treedata=n,e.$emit("SET:MENU",{header:o.name,text:o.link})},s=function(){t.error("Faild to get Menue"),r.treedata=[o],r.options={allowDeselect:!1},e.$emit("SET:MENU",{header:o.name,text:o.link})};n.getMenues().success(i).error(s),r.selectedNode=null,r.showSelected=function(n){return r.selectedNode&&r.selectedNode.link===n.link?(a.debug("Node %s was selected.",n.label),!1):(r.selectedNode=n,void(n.folder||e.$emit("SET:MENU",{header:n.name,text:n.link})))},r.create=function(e){l.open({bindToController:!0,controller:"CreateController",controllerAs:"cr",templateUrl:"app/components/navbar/templates/create.html",size:"lg",resolve:{menu:e}})},r.edit=function(e){l.open({bindToController:!0,controller:"ModifyController",controllerAs:"ed",templateUrl:"app/components/navbar/templates/modify.html",size:"lg",resolve:{menu:e}})},r.destroy=function(e){e.children&&e.children.length?t.warning("Delete files behind "+e.link+" firt."):l.open({bindToController:!0,controller:"DeleteController",controllerAs:"del",templateUrl:"app/components/navbar/templates/delete.html",size:"lg",resolve:{menu:e}})}}e.$inject=["$scope","menueService","toastr","$log","$uibModal"];var n={restrict:"E",templateUrl:"app/components/navbar/templates/navbar.html",controller:e,bindToController:!0,replace:!0,controllerAs:"nv"};return n}angular.module("markdownReader").directive("acmeNavbar",e)}(),function(){"use strict";function e(){function e(e){return!e||e.length>40||e.lenght<1?!1:l.test(e)?!1:!0}function n(n){e(n)}function t(e,n){e=e||[];for(var t=e.length,a=0;t>a;a++)if(e[a].label===n)return!0;return!1}var a={validFileName:e,validFolderName:n,checkExist:t},l=/[<>,\/\|:"*?']/g;return a}angular.module("markdownReader").factory("validatorService",e)}(),function(){"use strict";function e(e){function n(){return e({method:"GET",url:"/menu"})}function t(n){return e({method:"POST",url:"/folder",data:{dir:n}})}function a(n){return e({method:"POST",url:"/folder/del",data:{dir:n}})}function l(n,t){return e({method:"POST",url:"/folder/update/name",data:{dir:t,old:n}})}function r(n,t){return e({method:"POST",url:"/file",data:{file:n,content:t}})}function o(n){return e({method:"POST",url:"/file/del",data:{file:n}})}function i(n,t){return e({method:"POST",url:"/file/update",data:{file:n,content:t}})}function s(n,t){return e({method:"POST",url:"/file/update/name",data:{file:t,old:n}})}var d={getMenues:n,folder:{create:t,"delete":a,updateName:l},file:{create:r,"delete":o,update:i,updateName:s}};return d}e.$inject=["$http"],angular.module("markdownReader").factory("menueService",e)}(),function(){"use strict";function e(e,n,t,a,l,r,o){var i=this,s=o.link||"/doc";i.name=o.label||"";var d=i.name.length;d+=o.folder?0:3,i.link=s.substr(0,s.length-d),i.folder=o.folder,i.file=o.folder?!1:!0;var c=function(){i.folder?t.success("Update folder name successful"):t.success("Update file name successful"),e.$close(),n.go("home",null,{reload:!0})},u=function(e){i.folder?t.error("Faild to update folder name as "+e):t.error("Faild to update file name as "+e)};i.vaild=function(){return l.validFileName(i.name)?void(i.invalid=!1):(i.invalid=!0,!1)};var m=13;i.hander=function(e){var n=e.keyCode;n===m&&(i.folder?(a.debug("Updating folder name ..."),r.folder.updateName(o.link,i.link+"/"+i.name).success(c).error(u)):(a.debug("Updating file name ..."),r.file.updateName(o.link,i.link+"/"+i.name+".md").success(c).error(u)))}}e.$inject=["$scope","$state","toastr","$log","validatorService","menueService","menu"],angular.module("markdownReader").controller("ModifyController",e)}(),function(){"use strict";function e(e,n,t,a,l){var r=this;r.fileName=l.link;var o=function(){t.success("Delete file/folder success."),e.$close(),n.go("home",null,{reload:!0})},i=function(){e.$close(),t.error("Faild to delete file/folder.")};r["delete"]=function(){l.folder?a.folder["delete"](l.link).success(o).error(i):a.file["delete"](l.link).success(o).error(i)}}e.$inject=["$scope","$state","toastr","menueService","menu"],angular.module("markdownReader").controller("DeleteController",e)}(),function(){"use strict";function e(e,n,t,a,l,r,o){var i=this;i.link=o.link+"/",i.name="",i.folder=o.folder,i.file=o.folder?!1:!0,t.debug(i);var s=function(){i.folder?a.success("Create folder successful"):a.success("Create file successful"),n.go("home",null,{reload:!0}),e.$close()},d=function(e){i.folder?a.error("Faild to create folder as "+e):a.error("Faild to create file as "+e)};i.valid=function(){return l.validFileName(i.name)?void(i.invalid=!1):(i.invalid=!0,!1)};var c=13;i.hander=function(e){var n=e.keyCode;if(n===c){if(l.checkExist(o.children,i.nam))return a.warn("File "+i.name+" exist."),!1;i.folder?(t.debug("Creating a folder ..."),r.folder.create(i.link+"/"+i.name).success(s).error(d)):(t.debug("Creating a file ..."),r.file.create(i.link+"/"+i.name+".md").success(s).error(d))}},i.select=function(e){"folder"===e?(i.folder=!0,i.file=!1):(i.folder=!1,i.file=!0)}}e.$inject=["$scope","$state","$log","toastr","validatorService","menueService","menu"],angular.module("markdownReader").controller("CreateController",e)}(),function(){"use strict";function e(){function e(e,n,t,a){var l=angular.element("#"+t.target);e.$watch(function(){return a.$modelValue},function(){l.length&&l.height()&&n.css("height",l.css("height"))})}e.$inject=["$scope","$ele","$attrs","ngModel"];var n={restrict:"A",require:"ngModel",link:e};return n}angular.module("markdownReader").directive("autoFixHeight",e)}(),function(){"use strict";function e(e,n,t,a,l){var r=this;r.showNav=!0,r.editable=!1,e.$on("SET:MENU",function(e,n){r.content=n,s()}),r.content={header:"README",text:"/README.md"};var o=function(e){r.content.content=e},i=function(){t.error("Faild to read data from "+r.content.text)},s=function(){n({method:"GET",url:r.content.text}).success(o).error(i)};s(),r.save=function(){t.success("Update file/folder success."),l.go("home",null,{reload:!0})};var d=function(){t.success("Update file success."),l.go("home",null,{reload:!0})},c=function(){t.error("Failed to update file, please try again.")};r.handle=function(e){!e&&r.editable?e="save":e||r.editable||(e="edit"),"cancel"===e?(r.editable=!1,r.showNav=!0):"edit"===e?(r.editable=!0,r.showNav=!1):"save"===e&&a.file.update(r.content.text,r.content.content).success(d).error(c)}}e.$inject=["$scope","$http","toastr","menueService","$state"],angular.module("markdownReader").controller("MainController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("markdownReader").run(e)}(),function(){"use strict";function e(e,n){e.state("home",{url:"/",templateUrl:"app/main/templates/main.html",controller:"MainController",controllerAs:"main"}),n.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("markdownReader").config(e)}(),function(){"use strict";angular.module("markdownReader").constant("malarkey",malarkey).constant("moment",moment)}(),function(){"use strict";function e(e,n,t){e.debugEnabled(!0),n.allowHtml=!0,n.timeOut=5e3,n.positionClass="toast-top-right",t.setOptions({gfm:!0,tables:!0,highlight:function(e,n){return n?hljs.highlight(n,e,!0).value:hljs.highlightAuto(e).value}})}e.$inject=["$logProvider","toastrConfig","markedProvider"],angular.module("markdownReader").config(e)}(),angular.module("markdownReader").run(["$templateCache",function(e){e.put("app/main/templates/main.html","<acme-navbar ng-show=main.showNav></acme-navbar><div class=main-view ng-class=\"{false: 'larger-main', true: ''}[main.showNav]\"><div class=main-container><div class=main-header></div><div class=main-center ng-class=\"{true: 'larger-center', false: ''}[main.editable]\"><div class=content-header><div class=content-header-tools><i ng-class=\"{true: 'left', false: 'right'}[main.showNav]\" ng-click=\"main.showNav=!main.showNav\"></i> <i ng-class=\"{true: 'save', false: 'edit'}[main.editable]\" ng-click=main.handle()></i> <i class=cancel ng-click=\"main.handle('cancel')\" ng-show=main.editable></i></div></div><div class=content-main><textarea type=text ng-if=main.editable class=\"edit-content split-content\" ng-model=main.content.content></textarea><div marked=main.content.content class=content-marked ng-class=\"{true: 'split-content', false: ''}[main.editable]\"></div></div></div><div class=main-footer></div></div></div>"),e.put("app/components/navbar/templates/create.html","<div class=\"modal-form create\"><div class=modal-desc><i class=add></i><span>Click enter to add a file or a folder.</span></div><div class=field ng-class=\"{true: 'field-invalid', false: ''}[cr.invalid]\"><div class=field-type><input type=checkbox ng-model=cr.folder ng-click=\"cr.select('folder')\"> <span class=text>folder&nbsp;or&nbsp;</span> <input type=checkbox ng-model=cr.file ng-click=\"cr.select('file')\"> <span class=text>file&nbsp;with&nbsp;path&nbsp;</span></div><span class=field-link ng-bind=cr.link></span> <input class=field-name ng-model=cr.name type=text ng-change=cr.valid() ng-keydown=cr.hander($event) autofocus> <span ng-show=cr.file>.md</span></div></div>"),e.put("app/components/navbar/templates/delete.html",'<div class="modal-form create"><div class=modal-desc><i class=delete></i><span>Are you sure to delete file/folder <strong>{{del.fileName}}<strong>?</strong></strong></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class="btn-danger btn btn-del" ng-click=del.delete()>Yes, Destroy It</button></div></div>'),e.put("app/components/navbar/templates/modify.html","<div class=\"modal-form modify\"><div class=modal-desc><i class=edit></i><span>Click enter to update {{ed.folder?'folder':'file'}} name.</span></div><div class=field ng-class=\"{true: 'field-invalid', false: ''}[ed.invalid]\"><span class=field-link ng-bind=ed.link></span> <input class=field-name ng-model=ed.name type=text ng-change=cr.valid() ng-keydown=ed.hander($event) autofocus> <span ng-show=ed.file>.md</span></div></div>"),e.put("app/components/navbar/templates/navbar.html","<nav class=navbar-left><div class=nav-title><a class=desc href=https://github.com/hahaps>Hahaps Doc</a></div><treecontrol class=tree-dark tree-model=nv.treedata on-selection=nv.showSelected(node)><span>{{node.label}}</span><div class=tree-tools><i ng-if=node.folder class=tree-tool-add ng-click=nv.create(node)></i> <i class=tree-tool-del ng-click=nv.destroy(node)></i> <i class=tree-tool-edit ng-click=nv.edit(node)></i></div></treecontrol></nav>")}]);
//# sourceMappingURL=../maps/scripts/app-2f9abc9abf.js.map
